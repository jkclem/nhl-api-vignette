---
title: "NHL API Vignette"
author: "John Clements"
date: "6/15/2021"
output: 
  html_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Requirements

To use these functions, you need to install and load the [`jsonlite`](https://cran.r-project.org/web/packages/jsonlite/) and [`dplyr`](https://cran.r-project.org/web/packages/dplyr/) packages.

```{r message=FALSE, warning=FALSE}
# This library is useful for contacting an API.
library(jsonlite)
# This library is useful for manipulating dataframes.
library(dplyr)
```

# Functions

## `franchise`

```{r}
franchise <- function(team="all"){
  ###
  # This functions returns a dataframe with the franchise ID, first and last 
  # season IDs, location and team name for either all teams who ever played 
  # in the NHL. It can also return those columns for a single team if a 
  # franchise ID or name is passed.
  ###
  
  # Get the franchise data from the franchises endpoint.
  franchiseData <- fromJSON(
      "https://records.nhl.com/site/api/franchise"
      )
  
  # Select only the dataframe.
  output <- franchiseData$data
  
  # If team does not equal "all", check if it is a franchise ID or team name.
  if (team != "all"){
    
    # If team is in the id column, subset output for just that row.
    if (team %in% output$id){
      output <- output %>%
        filter(id == team)
    }
    # If team is in the fullName column, subset output for just that row.
    else if (team %in% output$fullName){
      output <- output %>%
        filter(fullName == team)
    }
    # Otherwise, warn the user and return the entire dataframe.
    else {
      message <- paste("WARNING: Argument for team was not found in either",
                       "the fullName or id columns. Returning all",
                       "franchises.")
      warning(message)
    }
  }
  # Do nothing if the team value equals "all".
  else {
    
  }
  
  # Return the output dataframe.
  return(output)
}
```

## `teamTotals`

```{r}
teamTotals <- function(team="all"){
  
  # Get the franchise data from the franchises endpoint.
  franchiseData <- fromJSON(
    "https://records.nhl.com/site/api/franchise-team-totals"
    )
  
  # Select only the dataframe.
  output <- franchiseData$data
  
  # If team does not equal "all", check if it is a team ID or team name.
  if (team != "all"){
    
    # If team is in the franchiseId column, subset output for just that row.
    if (team %in% output$franchiseId){
      output <- output %>%
        filter(franchiseId == team)
    }
    # If team is in the teamName column, subset output for just that row.
    else if (team %in% output$teamName){
      output <- output %>%
        filter(teamName == team)
    }
    # Otherwise, warn the user and return the entire dataframe.
    else {
      message <- paste("WARNING: Argument for team was not found in either",
                       "the teamName or franchiseId columns. Returning all",
                       "franchises.")
      warning(message)
    }
  }
  # Do nothing if the team value equals "all".
  else {
    
  }
  
  # Return the output dataframe.
  return(output)
}
```

## `seasonsRecords`

```{r}
baseURL <- "https://records.nhl.com/site/api/franchise-season-records?cayenneExp=franchiseId="














